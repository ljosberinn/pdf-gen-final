function arbeitszeitCalculator(){const vonValue=$("#von").val().split(":"),bisValue=$("#bis").val().split(":");$.each([vonValue,bisValue],function(i,el){el.length});const stundenToMinutes=60*(parseInt(bisValue[0],10)-parseInt(vonValue[0],10)),minutenToMinutes=parseInt(bisValue[1],10)-parseInt(vonValue[1],10),frühstückspause=returnFrühstückspauseValue(),mittagspause=returnMittagspauseValue();arbeitszeit=stundenToMinutes+minutenToMinutes-frühstückspause-mittagspause}function returnFrühstückspauseValue(){const checkbox=$("#frühstückspause");return checkbox.is(":checked")?15:0}function returnMittagspauseValue(){const checkbox=$("#mittagspause");return checkbox.is(":checked")?30:0}function scanFirstCreationTbodyRow(){const idTemplates=["kostenstelle","leistungsart","minuten"];let counter=0;return $.each(idTemplates,(i,template)=>{""!==$(`#${template}-1`).val()&&(counter+=1)}),counter===idTemplates.length}function toggleSaveButtons(){const hasRequiredValues=scanFirstCreationTbodyRow(),buttons=[$("#later"),$("#now")];$.each(buttons,(i,button)=>{$(button).disable(!hasRequiredValues)})}function scanInputs(){let hasValue=!1;return $.each($("#creation-tbody input"),(i,el)=>{""!==$(el).val()&&(hasValue=!0)}),hasValue}function toggleContentRemoveButton(){const hasValues=scanInputs();$("#remove-contents").disable(!hasValues)}function switchActiveNavigationLink(selectedNav){$(".navbar-item[data-target]").each((i,navLink)=>{selectedNav===navLink.id?$(navLink).addClass("is-active"):$(navLink).removeClass("is-active")})}function switchActiveModule(targetId){$("main > div").each((i,moduleEl)=>{targetId===moduleEl.id?$(moduleEl).css("display","block"):$(moduleEl).css("display","none")})}function toggleTab(selectedNav,targetId){switchActiveNavigationLink(selectedNav),switchActiveModule(targetId)}function minutesCalculator(){const resultTarget=$("#tagessumme");let result=0;$.each($('[id^="minuten-"]'),(i,el)=>{if("minuten-890"!==el.id){let val=0;val=parseInt($(el).val(),10),isNaN(val)||(result+=val)}}),update890Row(result),resultTarget.val(result)}function minutesCalculatorEventListener(el){el.addEventListener("input",()=>{minutesCalculator(),toggleContentRemoveButton()})}function minutesCalculatorEventListenerHelper(nextRowId){if(nextRowId)minutesCalculatorEventListener($(`#minuten-${nextRowId}`)[0]);else{const els=$("[id^='minuten-']");$.each(els,(i,el)=>{"minuten-890"!==el.id&&minutesCalculatorEventListener(el)})}}function addTREventListeners(nextRowId){$.each($(`[id*="-${nextRowId}"]`),(i,el)=>{5!==i&&el.addEventListener("input",()=>{toggleContentRemoveButton(),toggleSaveButtons()})}),minutesCalculatorEventListenerHelper(nextRowId)}function addTR(){const tbody=$("#creation-tbody"),currentTRCount=$("#creation-tbody tr").length,nextRowId=currentTRCount+1,template=`\n  <tr>\n    <td data-label="Kostenstelle" title="Kostenstelle">\n      <div class="field">\n        <div class="control">\n          <input id="kostenstelle-${nextRowId}" name="kostenstelle-${nextRowId}" min="0" pattern="^(?!0+$)d+$" class="input" list="kostenstelle" type="number" placeholder="${nextRowId}">\n        </div>\n      </div>\n    </td>\n    <td data-label="Auftragsnummer" title="Auftragsnummer">\n      <div class="field">\n        <div class="control">\n          <input id="auftragsnummer-${nextRowId}" name="auftragsnummer-${nextRowId}" class="input" type="number" min="0" pattern="^(?!0+$)d+$">\n        </div>\n      </div>\n    </td>\n    <td data-label="Kunde" title="Kunde">\n      <div class="field">\n        <div class="control">\n          <input id="kunde-${nextRowId}" name="kunde-${nextRowId}" class="input" type="text">\n        </div>\n      </div>\n    </td>\n    <td data-label="Leistungsart" title="Leistungsart">\n      <div class="field">\n        <div class="control">\n          <input id="leistungsart-${nextRowId}" name="leistungsart-${nextRowId}" class="input" list="leistungsart" min="0" type="number" pattern="^(?!0+$)d+$">\n        </div>\n      </div>\n    </td>\n    <td data-label="Minuten" title="Minuten">\n      <div class="field">\n        <div class="control">\n          <input id="minuten-${nextRowId}" name="minuten-${nextRowId}" class="input" type="number" min="0" pattern="^(?!0+$)d+$">\n        </div>\n      </div>\n    </td>\n    <td data-label="Anzahl" title="Anzahl">\n      <div class="field">\n        <div class="control">\n          <input id="anzahl-${nextRowId}" name="anzahl-${nextRowId}" class="input" type="number" min="0" pattern="^(?!0+$)d+$">\n        </div>\n      </div>\n    </td>\n    <td data-label="Materialnummer" title="Materialnummer">\n      <div class="field">\n        <div class="control">\n          <input id="materialnummer-${nextRowId}" name="materialnummer-${nextRowId}" class="input" type="number" min="0" pattern="^(?!0+$)d+$">\n        </div>\n      </div>\n    </td>\n  </tr>`;nextRowId<=22?tbody.append(template):alert("Mehr als 22 Zeilen passen nicht auf einen Zettel."),addTREventListeners(nextRowId)}function returnFeierabend(){const startzeit=480,endzeit=480+arbeitszeit+30+15,endStunde=Math.floor(endzeit/60),endMinuten=60*(endzeit/60-endStunde);return`${endStunde}:${endMinuten}`}function setDatepickerDefaultsDE(){$.datepicker.setDefaults({showWeek:!0,firstDay:1,changeMonth:!0,changeYear:!0,dateFormat:"dd.mm.y"}),$.datepicker.regional.de={clearText:"löschen",clearStatus:"aktuelles Datum löschen",closeText:"schließen",closeStatus:"ohne Änderungen schließen",prevText:"<zurück",prevStatus:"letzten Monat zeigen",nextText:"Vor>",nextStatus:"nächsten Monat zeigen",currentText:"heute",currentStatus:"",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],monthStatus:"anderen Monat anzeigen",yearStatus:"anderes Jahr anzeigen",weekHeader:"Wo",weekStatus:"Woche des Monats",dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],dayStatus:"Setze DD als ersten Wochentag",dateStatus:"Wähle D, M d",dateFormat:"dd.mm.yy",firstDay:1,initStatus:"Wähle ein Datum",isRTL:!1},$.datepicker.setDefaults($.datepicker.regional.de)}function initDateAndTimePicker(){const datepicker=$("#datepicker");datepicker.datepicker(),datepicker.datepicker("setDate","now"),console.log(arbeitszeit),$("#von").timepicker({defaultTime:"08:00",timeFormat:"HH:mm",interval:5,dynamic:!0,change:function(){arbeitszeitCalculator()}}),$("#bis").timepicker({defaultTime:returnFeierabend(),timeFormat:"HH:mm",interval:5,dynamic:!0,change:function(){arbeitszeitCalculator()}})}function addPausenListener(){const checkboxes=[$("#frühstückspause"),$("#mittagspause")],pausenzeiten=[15,30];$.each(checkboxes,(i,el)=>{el.change(function(){this.checked?arbeitszeit-=pausenzeiten[i]:arbeitszeit+=pausenzeiten[i],updateArbeitszeitValues()})})}function update890Row(minutes){const minuten890=arbeitszeit-minutes;0===minuten890?$("#tr-890").fadeOut():($("#tr-890").fadeIn(),minuten890<0?$("#minuten-890").addClass("is-danger"):$("#minuten-890").removeClass("is-danger")),$("#minuten-890").val(minuten890)}function updateArbeitszeit(){}function updateArbeitszeitValues(){$("#arbeitszeit").val(`von ${arbeitszeit}`),$("#tagessumme").prop("placeholder",arbeitszeit)}function addEventListeners(){const navbarBurgers=Array.prototype.slice.call($(".navbar-burger"),0);navbarBurgers.length>0&&$.each(navbarBurgers,(i,el)=>{el.addEventListener("click",()=>{const target=el.dataset.target,target2=$(`#${target}`);$(el).toggleClass("is-active"),$(target2).toggleClass("is-active")})}),$.each($(".navbar-item[data-target]"),(i,el)=>{el.addEventListener("click",()=>{toggleTab(el.id,el.dataset.target)})}),$("#add-tr")[0].addEventListener("click",()=>{addTR()}),$("#remove-contents")[0].addEventListener("click",()=>{$.each($("#creation-tbody input"),(i,el)=>{$(el).val("")}),toggleContentRemoveButton(),toggleSaveButtons()}),$.each($("#creation-tbody input"),(i,el)=>{el.addEventListener("input",()=>{toggleContentRemoveButton(),toggleSaveButtons()})}),arbeitszeit=parseInt($("#arbeitszeit").val().replace(/von /,""),10),addPausenListener(),minutesCalculatorEventListenerHelper()}jQuery.fn.extend({disable:function(state){return this.each(function(){this.disabled=state})}}),$(document).ready(()=>{addEventListeners(),setDatepickerDefaultsDE(),initDateAndTimePicker()});